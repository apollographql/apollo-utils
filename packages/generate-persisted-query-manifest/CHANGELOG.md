# @apollo/generate-persisted-query-manifest

## 1.2.2

### Patch Changes

- [#453](https://github.com/apollographql/apollo-utils/pull/453) [`8f82b5b`](https://github.com/apollographql/apollo-utils/commit/8f82b5b4875d8746e44997bcfdaace51b5441068) Thanks [@glasser](https://github.com/glasser)! - README-only change.

## 1.2.1

### Patch Changes

- [#435](https://github.com/apollographql/apollo-utils/pull/435) [`9c3d761`](https://github.com/apollographql/apollo-utils/commit/9c3d761e93fff6c2c588ba41ab158152bf920935) Thanks [@jerelmiller](https://github.com/jerelmiller)! - Better report errors that originate from Apollo Client during manifest generation.

- [#435](https://github.com/apollographql/apollo-utils/pull/435) [`9c3d761`](https://github.com/apollographql/apollo-utils/commit/9c3d761e93fff6c2c588ba41ab158152bf920935) Thanks [@jerelmiller](https://github.com/jerelmiller)! - Detect multiple operations during manifest generation and report them as errors.

## 1.2.0

### Minor Changes

- [#414](https://github.com/apollographql/apollo-utils/pull/414) [`b8b7d12`](https://github.com/apollographql/apollo-utils/commit/b8b7d12693967376b47e11504ede13972e5bcef7) Thanks [@jerelmiller](https://github.com/jerelmiller)! - Add ability to parse documents generated by GraphQL Codegen's [persisted documents](https://the-guild.dev/graphql/codegen/plugins/presets/preset-client#persisted-documents) feature.

  ```ts
  // persisted-query-manifest.config.ts
  import { fromGraphQLCodegenPersistedDocuments } from "@apollo/generate-persisted-query-manifest";

  const config = {
    documents: fromGraphQLCodegenPersistedDocuments(
      "./path/to/persisted-documents.json",
    ),
  };

  export default config;
  ```

- [#412](https://github.com/apollographql/apollo-utils/pull/412) [`c43f485`](https://github.com/apollographql/apollo-utils/commit/c43f485534bc22c93c37ca513b894089c25f899c) Thanks [@jerelmiller](https://github.com/jerelmiller)! - Add ability to specify a custom document transform used during manifest generation.

  > [!NOTE]
  > You must be running Apollo Client 3.8.0 or greater to use this feature.

  > [!IMPORTANT]
  > This should be the same document transform that is passed to your `ApolloClient` instance, otherwise you risk mismatches in the query output.

  ```ts
  // persisted-query-manifest.config.ts
  import { PersistedQueryManifestConfig } from "@apollo/generate-persisted-query-manifest";
  import { DocumentTransform } from "@apollo/client/core";

  const documentTransform = new DocumentTransform((document) => {
    // transform your document
    return transformedDocument;
  });

  const config: PersistedQueryManifestConfig = {
    documentTransform,
  };

  export default config;
  ```

## 1.1.0

### Minor Changes

- [#344](https://github.com/apollographql/apollo-utils/pull/344) [`b32a3d1`](https://github.com/apollographql/apollo-utils/commit/b32a3d13aacde6372332efaa761d92087c5ac74e) Thanks [@jerelmiller](https://github.com/jerelmiller)! - Add a `--list-files` option that lists the set of matched files against the `documents` pattern.

### Patch Changes

- [#345](https://github.com/apollographql/apollo-utils/pull/345) [`145836c`](https://github.com/apollographql/apollo-utils/commit/145836c351e032e048975fc02eb90179582a5d9e) Thanks [@jerelmiller](https://github.com/jerelmiller)! - Better error reporting when an error is raised while parsing a source file for GraphQL query strings (such as a syntax error). Previously the stack trace was reported to the console with little to no identifying information as to which file caused the error. The filename is now reported similarly to other errors encountered when running the CLI. An additional improvement is that it will now gather all errors, including syntax errors in a single pass so that syntax errors do not halt the program in place.

- [#348](https://github.com/apollographql/apollo-utils/pull/348) [`c3cbc4d`](https://github.com/apollographql/apollo-utils/commit/c3cbc4dfa66ccf7645fed78a8ed249615f848ac7) Thanks [@jerelmiller](https://github.com/jerelmiller)! - Adds the number of matched operations recorded to the manifest file in the success message once the CLI finishes. If no operations were found, a warning is now logged.

## 1.0.0

### Major Changes

- [#287](https://github.com/apollographql/apollo-utils/pull/287) [`1a64dfa`](https://github.com/apollographql/apollo-utils/commit/1a64dfabc47d0d735473aecd23d540cab6737ca8) Thanks [@glasser](https://github.com/glasser)! - Initial release
